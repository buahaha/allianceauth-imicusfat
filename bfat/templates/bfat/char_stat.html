{% extends "allianceauth/base.html" %}
{% load i18n %}
{% block page_title %}{{ character }} {% trans "Statistics" %}{% endblock %}

{% block content %}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>

    <div class="col-lg-12">
        <br>
        {% include 'bfat/menu.html' %}
        <h2>{{ character }} {% trans "Statistics" %}</h2>
        <h4>{{ month|month }} {{ year }}</h4>
        <ul class="nav nav-tabs">
            <li class="active"><a data-toggle="tab" href="#graphs">Graphs</a></li>
            <li><a data-toggle="tab" href="#rawdata">Raw Data</a></li>
        </ul>
        <div class="tab-content">
            <div id="graphs" class="tab-pane fade in active panel-default">
                <div class="panel-body">
                    <h4>{{ term }}s by Ship Type</h4>
                    <canvas id="pie-ship" width="400" height="400"></canvas>
                    <script>
                        var shipPieChart = new Chart(document.getElementById("pie-ship"), {
                            type: "pie",
                            data: {
                                datasets: [{
                                    data: {{ data_ship_type.1|safe }},
                                    backgroundColor: {{ data_ship_type.2|safe }}
                                }],
                                labels: {{ data_ship_type.0|safe }}
                            },
                            options: {
                                responsive: false
                            }
                        })
                    </script>

                    <h4>{{ term }}s by Time of Day</h4>
                    <canvas width="800" height="500" id="line-time"></canvas>
                    <script>
                        var {{ term }}LineChart = new Chart(document.getElementById("line-time"),{
                            type: "line",
                            data: {
                                datasets: [{
                                    label: "# of {{ term }}s",
                                    data: {{ data_time.1|safe }},
                                    backgroundColor: {{ data_time.2|safe }}
                                }],
                                labels: {{ data_time.0|safe }}
                            },
                            options: {
                                responsive: false
                            }
                        })
                    </script>

                </div>
            </div>
            <div id="rawdata" class="tab-panel fade active panel-default">
                <div class="panel-body">
                    <h4> {{ term }}s for {{ character }}</h4>
                    <p> Table goes here.</p>
                </div>
            </div>
        </div>
    </div>
{% endblock %}